<!DOCTYPE html>
<html>
<head>
    <title>Thirupugazh â€“ POS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body { margin:0; font-family:Arial,sans-serif; background:#f3f4f6; }

        header { background:#1e3a8a; color:white; padding:10px 15px; }
        header img { height:30px; }

        #headerButtons button {
            margin:4px 3px; padding:6px 10px;
            border:none; border-radius:4px; cursor:pointer;
        }

        .btn-logout { background:#dc2626; color:white; }
        .btn-admin { background:#2563eb; color:white; }

        .container {
            display:flex; gap:10px; padding:10px;
            height:calc(100vh - 120px);
        }

        .menu,.cart,.holds {
            background:white; padding:10px;
            border-radius:8px; overflow-y:auto;
        }

        .menu { flex:2; }
        .cart { flex:1.5; }
        .holds { flex:1; }

        input,select {
            width:100%; padding:8px; margin-bottom:6px;
            border-radius:5px; border:1px solid #ccc;
        }

        #menuButtons button {
            width:100%; padding:12px; margin-bottom:6px;
            border:none; border-radius:6px;
            background:#e5e7eb; font-weight:bold;
            cursor:pointer;
        }

        #menuButtons button:hover { background:#dbeafe; }

        .cart-item {
            display:flex; justify-content:space-between;
            align-items:center; padding:6px 0;
            border-bottom:1px solid #eee;
        }

        .total { font-weight:bold; margin-top:6px; }

        .btn-hold,.btn-resume,.btn-pay {
            width:100%; padding:10px; margin-top:6px;
            border:none; border-radius:6px;
            font-weight:bold; cursor:pointer;
        }

        .btn-hold { background:#f59e0b; color:white; }
        .btn-resume { background:#2563eb; color:white; }
        .btn-pay { background:#16a34a; color:white; }

        #resumeModal {
            display:none; position:fixed;
            top:15%; left:50%; transform:translateX(-50%);
            background:white; padding:15px;
            width:90%; max-width:400px;
            border-radius:8px;
            box-shadow:0 5px 15px rgba(0,0,0,0.3);
        }

        #closingModal {
            display:none; position:fixed;
            top:20%; left:50%;
            transform:translateX(-50%);
            background:white; padding:20px;
            width:90%; max-width:400px;
            border-radius:8px;
            box-shadow:0 5px 15px rgba(0,0,0,0.3);
            z-index:2000;
        }

        .mobile-cart-btn {
            display:none; position:fixed;
            bottom:15px; right:15px;
            background:#16a34a; color:white;
            padding:14px 18px; border-radius:50px;
            font-weight:bold;
            box-shadow:0 4px 12px rgba(0,0,0,0.3);
            z-index:1000;
        }

        @media (max-width:768px){
            .container{flex-direction:column;height:auto;}
            .holds{display:none;}
            .cart{
                position:fixed; bottom:-100%;
                left:0; width:100%; height:70%;
                transition:.3s;
            }
            .cart.active{bottom:0;}
            .mobile-cart-btn{display:block;}
        }
    </style>
</head>

<body>

<button class="mobile-cart-btn" onclick="toggleMobileCart()">ðŸ›’ Cart</button>

<div id="closingModal">
    <h3>ðŸ“Š Daily Closing Summary</h3>
    <div id="closingContent">Loading...</div>
    <button onclick="closeClosing()" 
        style="margin-top:10px;padding:8px 12px;border:none;border-radius:5px;background:#ef4444;color:white;">
        Close
    </button>
</div>

<header>
    <div style="display:flex;align-items:center;gap:10px;">
        <img src="/static/logo.png">
        <span>Thirupugazh â€“ POS</span>
        <span id="loggedUser" style="margin-left:10px;font-size:14px;font-weight:bold;"></span>
    </div>

    <div style="display:inline-block;padding:6px 12px;background:#e3f2fd;border-radius:4px;font-weight:bold;">
        <span id="mySales">Loading...</span>
    </div>

    <div id="headerButtons">
        <button onclick="goHome()">Home</button>
        <button class="btn-admin" onclick="window.location='/admin/breakdown'">
    Admin Breakdown
</button>
        <button class="btn-admin" onclick="goStaff()">Staff</button>
        <button onclick="goChangePassword()">Change Password</button>
        <button class="btn-logout" onclick="logout()">Logout</button>
    </div>
</header>

<div class="container">

    <div class="menu">
        <h3>Menu</h3>
        <div id="menuButtons">Loading...</div>
    </div>

    <div class="cart">
        <h3>Cart</h3>

        <input id="customerName" placeholder="Customer Name">
        <input id="mobileNumber" placeholder="Mobile Number (10 digits)">
        <input id="transactionId" placeholder="Transaction ID">
        <input id="gpayNumber" placeholder="GPay Mobile Number" style="display:none;">

        <select id="paymentMode" onchange="toggleGpay()">
            <option value="">Select Payment Mode</option>
            <option value="CASH">Cash</option>
            <option value="UPI">UPI</option>
            <option value="GPAY">GPay</option>
            <option value="ONLINE">Online</option>
            <option value="MIXED">Mixed</option>
        </select>

        <div id="cartItems"></div>

        <input id="discount" type="number" min="0" placeholder="Discount â‚¹" oninput="recalculateTotal()">

        <div class="total">Sub Total: â‚¹<span id="subTotal">0</span></div>
        <div class="total">Final Total: â‚¹<span id="finalTotal">0</span></div>

        <button class="btn-hold" onclick="holdBill()">HOLD</button>
        <button class="btn-resume" onclick="showResume()">RESUME</button>
        <button class="btn-pay" onclick="payNow()">PAY</button>
    </div>

    <div class="holds">
        <h3>Hold Bills</h3>
        <div id="holdList">No holds</div>
    </div>

</div>

<div id="resumeModal">
    <h3>Select Hold Bill</h3>
    <div id="resumeList"></div>
    <button onclick="closeResume()">Close</button>
</div>

<script>

</script>

<audio id="paymentSound" src="/static/payment-success.mp3" preload="auto"></audio>

</body>
</html>